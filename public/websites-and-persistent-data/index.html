<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap.min.css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap-theme.min.css">
</head>
<body>
	<div class="container">
		<div class="page-header">
			<h1>Websites and Persistent Data</h1>
			<p class="lead">This tutorial walks you through creating a website that utilizes persistent data. You will learn how to access an SQL database and manage data for your website.</p>
			<ul>Prequisites
				<li>HTML</li>
				<li>Basic Object Oriented Programming. PHP knowledge is helpful.</li>
				<li>Access to a MySQL Database</li>
			</ul>
			<p>* This tutorial intends to walk you through concepts and is designed to be langauge agnostic. Although this tutorial uses PHP as the server side programming language, the concepts can be coded in any language.</p>
		</div>
		<ul>
			<li>Design Specifications</li>
			<li>CGI responder</li>
			<li>SQL Tables</li>
			<li>SQL Queries</li>
			<li>SQL Injection prevention</li>
		</ul>

		<div class="row">
			<div class="panel-group" id="Design_Specifications_Section">
				<div class="panel panel-default">
					<div class="panel-heading">
						<a data-toggle="collapse" data-parent="#Design_Specifications_Section" href="#Design_Specifications">
							<h4 class="panel-title">
									Design Specifications
							</h4>
						</a>
					</div>
					<div id="Design_Specifications" class="panel-collapse collapse">
						<div class="panel-body">
							TODO: Add Design Specifications diagram.
						</div>
					</div>
				</div>
			</div>
		</div>
		<br>
		<div class="row">
			<div class="panel-group" id="CGI_Responder_Section">
				<div class="panel panel-default">
					<div class="panel-heading">
						<a data-toggle="collapse" data-parent="#CGI_Responder_Section" href="#CGI_Responder">
							<h4 class="panel-title">
								CGI responder
							</h4>
						</a>
					</div>
					<div id="CGI_Responder" class="panel-collapse collapse">
						<div class="panel-body">
<p>Create a responder.<b>php</b> file on the website with the following code:</p>
<pre>
&lt;?php
    print "Hello\n";
?>
</pre>

<h4>Test the program</h4>
<p>Test the program on the server</p>
<pre>
php responder.php
</pre>

<p>Remotely test program using cURL</p>
<pre>
curl -k <b>"http://__URL__/response.php"</b>
</pre>

<p>The server should respond to both with the following:</p>
<pre>
Hello
</pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<br>
		<div class="row">
			<div class="panel-group" id="SQL_Tables_Section">
				<div class="panel panel-default">
					<div class="panel-heading">
						<a data-toggle="collapse" data-parent="#SQL_Tables_Section" href="#SQL_Tables">
							<h4 class="panel-title">
								SQL Tables
							</h4>
						</a>
					</div>
					<div id="SQL_Tables" class="panel-collapse collapse">
						<div class="panel-body">
<p>Creating a Database table.</p>

<p>Create the following files:</p>

							<div class="panel-group" id="SQL_Tables_Files_Section">
								<div class="panel panel-default">
									<div class="panel-heading">
										<a data-toggle="collapse" data-parent="#SQL_Tables_Files_Section" href="#SQL_Tables_Responder">
											<h4 class="panel-title">
												responder.php
											</h4>
										</a>
									</div>
									<div id="SQL_Tables_Responder" class="panel-collapse collapse">
										<div class="panel-body">
<pre>
&lt;?php
namespace Websites_And_Persistent_Data;

include 'Config.php';
include 'Database.php';
include 'Todo.php';

$dbh = Database::initialize(
      Config::Hostname
    , Config::Username
    , Config::Password
    , Config::Database
    );

$todo = new Todo(
      Config::Table_Prefix
    , $dbh
    );

$todo->create();
?>
</pre>
										</div>
									</div>
								</div>

								<div class="panel panel-default">
									<div class="panel-heading">
										<a data-toggle="collapse" data-parent="#SQL_Tables_Files_Section" href="#SQL_Tables_Config">
											<h4 class="panel-title">
												Config.php
											</h4>
										</a>
									</div>
									<div id="SQL_Tables_Config" class="panel-collapse collapse">
										<div class="panel-body">
<pre>
&lt;?php
namespace Websites_And_Persistent_Data;

class Config {
    const Hostname = 'localhost';
    const Username = 'training';
    const Password = 'training_password';
    const Database = 'training';
    const Table_Prefix = "EX_";
}
?>
</pre>
										</div>
									</div>
								</div>

								<div class="panel panel-default">
									<div class="panel-heading">
										<a data-toggle="collapse" data-parent="#SQL_Tables_Files_Section" href="#SQL_Tables_Database">
											<h4 class="panel-title">
												Database.php
											</h4>
										</a>
									</div>
									<div id="SQL_Tables_Database" class="panel-collapse collapse">
										<div class="panel-body">
<pre>
&lt;?php
namespace Websites_And_Persistent_Data;

class Database {
    public static function initialize ($hostname, $username, $password, $database) {

        $dbh = new \mysqli($hostname, $username, $password, $database);

        if ($dbh->connect_error) {
            die("Connection failed: " . mysqli_connect_error() . "\n");
        }

        return $dbh;
    }
}
?>
</pre>
										</div>
									</div>
								</div>

								<div class="panel panel-default">
									<div class="panel-heading">
										<a data-toggle="collapse" data-parent="#SQL_Tables_Files_Section" href="#SQL_Tables_Todo">
											<h4 class="panel-title">
												Todo.php
											</h4>
										</a>
									</div>
									<div id="SQL_Tables_Todo" class="panel-collapse collapse">
										<div class="panel-body">
<pre>
&lt;?php
namespace Websites_And_Persistent_Data;

class Todo {
    private static $table_name = 'todo';

    private $table_prefix;
    private $dbh;

    public function __construct ($prefix, $dbh) {
        $this->table_prefix = $prefix;
        $this->dbh = $dbh;
    }

    public function create () {
        $table = $this->table_prefix . self::$table_name;

        $sth = $this->dbh->prepare("
            CREATE TABLE IF NOT EXISTS $table (
                  todo_id INTEGER PRIMARY KEY AUTO_INCREMENT
                , task TEXT
                , completed INTEGER DEFAULT 0
            )");

        if (!$sth) {
            die("Error: " . $this->dbh->error . "\n");
        }

        $ok = $sth->execute();

        if (! $ok) {
            die("Error: " . $this->dbh->error . "\n");
        }
    }
}
?>
</pre>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<br>
		<div class="row">
			<div class="panel-group" id="SQL_Queries_Section">
				<div class="panel panel-default">
					<div class="panel-heading">
						<a data-toggle="collapse" data-parent="#SQL_Queries_Section" href="#SQL_Queries">
							<h4 class="panel-title">
									SQL Queries
							</h4>
						</a>
					</div>
					<div id="SQL_Queries" class="panel-collapse collapse">
						<div class="panel-body">
							<div class="panel-group" id="SQL_Queries_Command_Section">
								<div class="panel panel-default">
									<div class="panel-heading">
										<a data-toggle="collapse" data-parent="#SQL_Queries_Command_Section" href="#SQL_Queries_Show_Record_list">
											<h4 class="panel-title">
												Show Record List
											</h4>
										</a>
									</div>
									<div id="SQL_Queries_Show_Record_list" class="panel-collapse collapse">
										<div class="panel-body">
<pre>
&lt;?php
namespace Websites_And_Persistent_Data;

class Database {
    public static function initialize ($hostname, $username, $password, $database) {

        $dbh = new \mysqli($hostname, $username, $password, $database);

        if ($dbh->connect_error) {
            die("Connection failed: " . mysqli_connect_error() . "\n");
        }

        return $dbh;
    }
}
?>
</pre>
										</div>
									</div>
								</div>
								<div class="panel panel-default">
									<div class="panel-heading">
										<a data-toggle="collapse" data-parent="#SQL_Queries_Command_Section" href="#SQL_Queries_Show_Record">
											<h4 class="panel-title">
												Show Record
											</h4>
										</a>
									</div>
									<div id="SQL_Queries_Show_Record" class="panel-collapse collapse">
										<div class="panel-body">
<pre>
&lt;?php
namespace Websites_And_Persistent_Data;

class Database {
    public static function initialize ($hostname, $username, $password, $database) {

        $dbh = new \mysqli($hostname, $username, $password, $database);

        if ($dbh->connect_error) {
            die("Connection failed: " . mysqli_connect_error() . "\n");
        }

        return $dbh;
    }
}
?>
</pre>
										</div>
									</div>
								</div>
								<div class="panel panel-default">
									<div class="panel-heading">
										<a data-toggle="collapse" data-parent="#SQL_Queries_Command_Section" href="#SQL_Queries_Store_Record">
											<h4 class="panel-title">
												Store Record
											</h4>
										</a>
									</div>
									<div id="SQL_Queries_Store_Record" class="panel-collapse collapse">
										<div class="panel-body">
<pre>
&lt;?php
namespace Websites_And_Persistent_Data;

class Database {
    public static function initialize ($hostname, $username, $password, $database) {

        $dbh = new \mysqli($hostname, $username, $password, $database);

        if ($dbh->connect_error) {
            die("Connection failed: " . mysqli_connect_error() . "\n");
        }

        return $dbh;
    }
}
?>
</pre>
										</div>
									</div>
								</div>
								<div class="panel panel-default">
									<div class="panel-heading">
										<a data-toggle="collapse" data-parent="#SQL_Queries_Command_Section" href="#SQL_Queries_Update_Record">
											<h4 class="panel-title">
												Update Record
											</h4>
										</a>
									</div>
									<div id="SQL_Queries_Update_Record" class="panel-collapse collapse">
										<div class="panel-body">
<pre>
&lt;?php
namespace Websites_And_Persistent_Data;

class Database {
    public static function initialize ($hostname, $username, $password, $database) {

        $dbh = new \mysqli($hostname, $username, $password, $database);

        if ($dbh->connect_error) {
            die("Connection failed: " . mysqli_connect_error() . "\n");
        }

        return $dbh;
    }
}
?>
</pre>
										</div>
									</div>
								</div>
								<div class="panel panel-default">
									<div class="panel-heading">
										<a data-toggle="collapse" data-parent="#SQL_Queries_Command_Section" href="#SQL_Queries_Delete_Record">
											<h4 class="panel-title">
												Delete Record
											</h4>
										</a>
									</div>
									<div id="SQL_Queries_Delete_Record" class="panel-collapse collapse">
										<div class="panel-body">
<pre>
&lt;?php
namespace Websites_And_Persistent_Data;

class Database {
    public static function initialize ($hostname, $username, $password, $database) {

        $dbh = new \mysqli($hostname, $username, $password, $database);

        if ($dbh->connect_error) {
            die("Connection failed: " . mysqli_connect_error() . "\n");
        }

        return $dbh;
    }
}
?>
</pre>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<h3>Conclusion</h3>


	</div>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
</body>
</html>

